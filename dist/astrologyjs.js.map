{"version":3,"sources":["astrologyjs.ts"],"names":[],"mappings":"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AI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,SAAS,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,OAAO,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,MAAM,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,SAAS,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,QAAQ,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,QAAQ,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,SAAS,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,OAAO,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,YAAY,EAAC,EAAC,MAAM,EAAC,YAAY,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,YAAY,EAAC,EAAC,MAAM,EAAC,YAAY,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,QAAQ,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,QAAQ,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,OAAO,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,QAAQ,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,MAAM,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,OAAO,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,QAAQ,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,UAAU,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,OAAO,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,GAAG,EAAC,IAAI,EAAC,EAAC,MAAM,EAAC,EAAC,MAAM,EAAC,IA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","file":"astrologyjs.js","sourcesContent":["/// <reference path=\"../typings/index.d.ts\" />\nlet rp = require(\"request-promise\");\n/**\n * One of the planets, asteroids, the sun or moon\n */\nexport class Planet {\n\n    /**\n     * The planet name, e.g. Mercury\n     * @type {string}\n     */\n    name: string;\n\n    /**\n     * A planet's longitude identifies what sign\n     * it is in\n     * @type {number}\n     */\n    longitude: number;\n\n    /**\n     * A planet's latitude describes it's distance\n     * from the ecliptic, and can be used to\n     * determine if it is out of bounds\n     * @type {number}\n     */\n    latitude: number;\n\n    /**\n     * A planet's speed allows us to know if it is\n     * retrograde, and to calculate whether an\n     * aspect is applying or separating\n     * @type {number}\n     */\n    speed: number;\n\n    /**\n     * The symbol for this planet as represented in\n     * the Kairon Semiserif font\n     * @type {string}\n     */\n    symbol: string;\n\n    /**\n     * Dictionary of symbols for the planets for\n     * use with the Kairon Semiserif font\n     * @type {Object}\n     */\n    private symbols = {\n        \"sun\":        \"a\",\n        \"moon\":       \"s\",\n        \"mercury\":    \"d\",\n        \"venus\":      \"f\",\n        \"earth\":      \"g\",\n        \"mars\":       \"h\",\n        \"jupiter\":    \"j\",\n        \"saturn\":     \"k\",\n        \"uranus\":     \"ö\",\n        \"neptune\":    \"ä\",\n        \"pluto\":      \"#\",\n        \"south node\": \"?\",\n        \"north node\": \"ß\",\n        \"ceres\":      \"A\",\n        \"pallas\":     \"S\",\n        \"juno\":       \"D\",\n        \"vesta\":      \"F\",\n        \"lilith\":     \"ç\",\n        \"cupido\":     \"L\",\n        \"chiron\":     \"l\",\n        \"nessus\":     \"ò\",\n        \"pholus\":     \"ñ\",\n        \"chariklo\":   \"î\",\n        \"eris\":       \"È\",\n        \"chaos\":      \"Ê\",\n        \"fortuna\":    \"%\"\n    };\n\n    /**\n     * Instantiate a new planet object.\n     * @param {string} name The planet's name\n     * @param {number} lon  The planet's longitude\n     * @param {number} lat  The planet's latitude\n     * @param {number} spd  The planet's speed relative to earth\n     */\n    constructor(name: string, lon: number, lat: number, spd: number) {\n        this.name = name;\n        this.longitude = lon;\n        this.latitude = lat;\n        this.speed = spd;\n        this.symbol = this.symbols[name.toLowerCase()];\n    }\n\n    /**\n     * A planet is retrograde when it's speed relative\n     * to earth is less than zero\n     * @return {boolean} Whether or not the planet is retrograde\n     */\n    isRetrograde(): boolean {\n        return this.speed < 0;\n    }\n\n    /**\n     * Is this one of the major planets typically included in a chart?\n     * @return {boolean} Returns true if it is a major planet\n     */\n    isMajor(): boolean {\n        return [\"sun\", \"moon\", \"mercury\", \"venus\", \"mars\", \"jupiter\", \"saturn\",\n                \"uranus\", \"neptune\", \"pluto\", \"north node\", \"south node\"]\n                .indexOf(this.name.toLowerCase()) > -1;\n    }\n}\n\ninterface GoogleAddressComponent {\n    long_name: string;\n    short_name: string;\n    types: Array<string>;\n}\n\nexport interface GoogleLocation {\n    lat: number;\n    lng: number;\n}\n\nexport type Point = GoogleLocation;\n\ninterface GoogleViewport {\n    northeast: GoogleLocation;\n    southwest: GoogleLocation;\n}\n\ninterface GoogleGeocode {\n    address_components: Array<GoogleAddressComponent>;\n    formatted_address: string;\n    geometry: {\n        location: GoogleLocation;\n        location_type: string;\n        viewport: GoogleViewport;\n        bounds?: GoogleViewport\n    };\n    place_id: string;\n    types: Array<string>;\n    partial_match?: boolean;\n    postcode_localities?: Array<string>;\n}\n\ninterface GoogleGeocodeResult {\n    results: Array<GoogleGeocode>;\n    status: string;\n    error_message?: string;\n}\n\ninterface GoogleTimezoneResult {\n   status: string;\n   dstOffset?: number;\n   rawOffset?: number;\n   timeZoneId?: string;\n   timeZoneName?: string;\n   errorMessage?: string;\n}\n\n/**\n * Represents a person or event for whom a chart will be created\n */\nexport class Person {\n\n    /**\n     * Google API key\n     * @type {string}\n     */\n    private static _key: string = \"AIzaSyAXnIdQxap1WQuzG0XxHfYlCA5O9GQyvuY\";\n\n    /**\n     * Creates a Person (or Event) object\n     * @param {string} public name Name of the person or event\n     * @param {string} public date UTC date in ISO 8601 format, i.e. YYYY-MM-DDTHH:mmZ (caller must convert to UTC)\n     * @param {Point} location The [lat: number, lon: number] of the event or person's birthplace\n     */\n    constructor(public name: string, public date: string, public location: Point) {}\n\n    /**\n     * Asynchronous factory function for creating people or events\n     * @param  {string}          name     Name of the person or event\n     * @param  {Date | string}   date     Exact datetime for the chart, preferably UTC date in ISO 8601 format, i.e. YYYY-MM-DDTHH:mmZ (caller must convert to UTC)\n     * @param  {Point | string}  location Either an address or a lat/lng combination\n     * @return {Promise<Person>}          The Person or Event object that was created\n     */\n    static async create(name: string, date: Date | string, location: Point | string): Promise<Person> {\n\n        let dt: string,\n            loc: Point;\n\n        // make sure a name was submitted\n        if (!name) {\n            throw new Error(\"No name was submitted for the person/event\");\n        }\n\n        // deal with the type of date submitted\n        if (typeof date === \"string\") {\n            if (!/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}(?::\\d{2}\\.\\d{3})?Z/.test(date)) {\n                throw new TypeError(\"Date not formatted according to ISO 8601 (YYYY-MM-DDTHH:mmZ)\");\n            }\n            dt = date;\n        }\n        else if (date instanceof Date) {\n            dt = date.toISOString();\n        }\n        else {\n            // defaults to \"now\"\n            dt = new Date().toISOString();\n        }\n\n        // deal with the type of location submitted\n        if (typeof location === \"string\") {\n            loc = await this.getLatLon(location);\n        } else {\n            // make sure latitude was valid\n            if (location.lat < -90 || location.lat > 90) {\n                throw new RangeError(\"Latitude must be between -90 and 90\");\n            }\n            // make sure longitude was valid\n            if (location.lng < -180 || location.lng > 180) {\n                throw new RangeError(\"Longitude must be between -180 and 180\");\n            }\n            loc = location;\n        }\n\n        return new Person(name, dt, loc);\n    }\n\n    /**\n     * Gets a timezone given a latitude and longitude\n     * @param {Point} p  Contains the latitude and longitude in decimal format\n     */\n    static async getTimezone(p: Point): Promise<string> {\n        return await rp({\n            uri: \"https://maps.googleapis.com/maps/api/timezone/json\",\n            qs: {\n                key: this._key,\n                location: `${p.lat},${p.lng}`,\n                timestamp: Math.floor(Date.now() / 1000)\n            },\n            json: true\n        }).then(\n            (tzinfo: GoogleTimezoneResult): string => tzinfo.timeZoneId,\n            (error:  GoogleTimezoneResult): any => { throw Error(error.errorMessage); }\n        );\n    }\n\n    /**\n     * Get a latitude and longitude given an address\n     * @param {string} address The address of the desired lat/lon\n     */\n    static async getLatLon(address: string): Promise<Point> {\n        return await rp({\n            uri: \"https://maps.googleapis.com/maps/api/geocode/json\",\n            qs: {\n                key: this._key,\n                address: address\n            },\n            json: true\n        }).then(\n            (latlng: GoogleGeocodeResult): Point => latlng.results[0].geometry.location,\n            (error:  GoogleGeocodeResult): Point => { throw Error(error.error_message); }\n        );\n    }\n}\n\n/**\n * Alias for the Person class\n * @type {[type]}\n */\nexport type Event = Person;\n\ninterface AspectType {\n    major: boolean;\n    angle: number;\n    orb: number;\n    symbol: string;\n}\n\ninterface AspectTypeArray {\n    [name: string]: AspectType;\n}\n\n/**\n * Represents an aspect between two planets\n */\nexport class Aspect {\n\n    /**\n     * A label naming the aspect type, e.g. trine\n     * @type {string}\n     */\n    private _type: string;\n\n    /**\n     * Number of degrees away from being perfectly in aspect\n     * @type {number}\n     */\n    private _orb: number;\n\n    /**\n     * Is the aspect applying or separating\n     * @type {boolean}\n     */\n    private _applying: boolean;\n\n    /**\n     * Catalog of all of the aspect types available in our system\n     * @type {AspectTypeArray}\n     */\n    private _types: AspectTypeArray = {\n       \"conjunct\":       { major: true,  angle:   0,     orb: 6  , symbol: \"<\" },\n       \"semisextile\":    { major: false, angle:  30,     orb: 3  , symbol: \"y\" },\n       \"decile\":         { major: false, angle:  36,     orb: 1.5, symbol: \">\" },\n       \"novile\":         { major: false, angle:  40,     orb: 1.9, symbol: \"M\" },\n       \"semisquare\":     { major: false, angle:  45,     orb: 3  , symbol: \"=\" },\n       \"septile\":        { major: false, angle:  51.417, orb: 2  , symbol: \"V\" },\n       \"sextile\":        { major: true,  angle:  60,     orb: 6  , symbol: \"x\" },\n       \"quintile\":       { major: false, angle:  72,     orb: 2  , symbol: \"Y\" },\n       \"bilin\":          { major: false, angle:  75,     orb: 0.9, symbol: \"-\" },\n       \"binovile\":       { major: false, angle:  80,     orb: 2  , symbol: \";\" },\n       \"square\":         { major: true,  angle:  90,     orb: 6  , symbol: \"c\" },\n       \"biseptile\":      { major: false, angle: 102.851, orb: 2  , symbol: \"N\" },\n       \"tredecile\":      { major: false, angle: 108,     orb: 2  , symbol: \"X\" },\n       \"trine\":          { major: true,  angle: 120,     orb: 6  , symbol: \"Q\" },\n       \"sesquiquadrate\": { major: false, angle: 135,     orb: 3  , symbol: \"b\" },\n       \"biquintile\":     { major: false, angle: 144,     orb: 2  , symbol: \"C\" },\n       \"inconjunct\":     { major: false, angle: 150,     orb: 3  , symbol: \"n\" },\n       \"treseptile\":     { major: false, angle: 154.284, orb: 1.1, symbol: \"B\" },\n       \"tetranovile\":    { major: false, angle: 160,     orb: 3  , symbol: \":\" },\n       \"tao\":            { major: false, angle: 165,     orb: 1.5, symbol: \"—\" },\n       \"opposition\":     { major: true,  angle: 180,     orb: 6  , symbol: \"m\" }\n    };\n\n    /**\n     * Creates a new Aspect or throws an error if no aspect exists\n     * between the planets\n     * @param {Planet} public p1 First planet in the relationship\n     * @param {Planet} public p2 Second planet in the relationship\n     */\n    constructor(public p1: Planet, public p2: Planet) {\n        // get key properties of the planets\n        let l1 = p1.longitude,\n            l2 = p2.longitude,\n            ng = Math.abs( l1 - l2 ),\n            r1 = p1.isRetrograde(),\n            r2 = p2.isRetrograde(),\n            s1 = Math.abs(p1.speed),\n            s2 = Math.abs(p2.speed),\n            ct = false; // corrected?\n\n        // correct for cases where the angle > 180 + the orb of opposition\n        if (ng > 180 + this._types[\"opposition\"].orb) {\n            ng = l1 > l2 ? 360 - l1 + l2 : 360 - l2 + l1;\n            ct = true;\n        }\n\n        // determine the aspect type\n        for (let type in this._types) {\n            let t = this._types[type];\n            if (ng >= t.angle - t.orb && ng <= t.angle + t.orb) {\n                this._type = type;\n            }\n        }\n\n        // bail out if there is no in-orb aspect between these two planets\n        if (typeof this._type === \"undefined\") {\n            throw new Error(\"There is no aspect between these two planets.\");\n        }\n\n        // determine the orb\n        this._orb = Number((ng % 1).toFixed(6));\n\n        // determine if it is applying or not; use speed magnitude (i.e. absolute value)\n        let orb = ng - this._types[this._type].angle;\n        // planets are in aspect across 0° Aries\n        if (( ( (orb < 0 && !ct && l2 > l1) || (orb > 0 && !ct && l1 > l2) ||\n                (orb < 0 &&  ct && l1 > l2) || (orb > 0 &&  ct && l2 > l1) ) &&\n                ( (!r1 && !r2 && s2 > s1) || (r1 && r2 && s1 > s2) || (r1 && !r2) ) ||\n            ( ( (orb > 0 && !ct && l2 > l1) || (orb < 0 && !ct && l1 > l2) ||\n                (orb > 0 &&  ct && l1 > l2) || (orb < 0 &&  ct && l2 > l1) ) &&\n                ( (!r1 && !r2 && s1 > s2) || (r1 && r2 && s2 > s1) || (!r1 && r2) ) ) )\n        ) {\n            this._applying = true;\n        } else {\n            this._applying = false;\n        }\n    }\n\n    /**\n     * Get the type assigned to this aspect\n     * @return {string} One of the aspect type names\n     */\n    get type(): string { return this._type; }\n\n    /**\n     * Get the number of degrees away from being in perfect aspect\n     * @return {number} The number of degrees (absolute value)\n     */\n    get orb(): number { return this._orb; }\n\n    /**\n     * Get the character that will produce the correct symbol for\n     * this aspect in the Kairon Semiserif font\n     * @return {string} A character representing a symbol\n     */\n    get symbol(): string { return this._types[this._type].symbol; }\n\n    /**\n     * Is the aspect applying or separating?\n     * @return {boolean} True if the aspect is applying\n     */\n    isApplying(): boolean { return this._applying; }\n\n    /**\n     * Is this a \"major\" aspect? i.e. one of those you usually\n     * hear about in astrological forecasts\n     * @return {boolean} True if this is a \"major\" aspect\n     */\n    isMajor(): boolean { return this._types[this._type].major; }\n}\n\nexport enum ChartType {\n    Basic,\n    Transits,\n    Synastry,\n    Combined,\n    Davison,\n    CombinedTransits,\n    DavisonTransits\n};\n\nexport interface PlanetData {\n    name: string;\n    lon: number;\n    lat: number;\n    spd: number;\n    r: number;\n}\n\nexport interface PlanetDataArray {\n    [name: string]: PlanetData;\n}\n\nexport interface ChartData {\n    planets: PlanetDataArray;\n    houses: Array<number>;\n    ascendant: number;\n    mc: number;\n}\n\nexport interface ChartDataArray {\n    [index: number]: ChartData;\n}\n\nexport class Chart {\n\n    _planets1: Array<Planet>;\n    _planets2: Array<Planet>;\n    _aspects: Array<Aspect>;\n    _ascendant: number;\n    _houses: Array<number>;\n\n    _signs = [\n        {name: \"aries\",       symbol: \"q\", v: 1},\n        {name: \"taurus\",      symbol: \"w\", v: 1},\n        {name: \"gemini\",      symbol: \"e\", v: 1},\n        {name: \"cancer\",      symbol: \"r\", v: 1},\n        {name: \"leo\",         symbol: \"t\", v: 1},\n        {name: \"virgo\",       symbol: \"z\", v: 1},\n        {name: \"libra\",       symbol: \"u\", v: 1},\n        {name: \"scorpio\",     symbol: \"i\", v: 1},\n        {name: \"sagittarius\", symbol: \"o\", v: 1},\n        {name: \"capricorn\",   symbol: \"p\", v: 1},\n        {name: \"aquarius\",    symbol: \"ü\", v: 1},\n        {name: \"pisces\",      symbol: \"+\", v: 1}\n    ];\n\n    constructor(public name: string, public p1: Person, cdata: ChartDataArray, public p2?: Person, public type: ChartType = ChartType.Basic) {\n        let pdata: ChartData;\n        switch (type) {\n            case ChartType.Combined:\n                pdata = this.calculateCombinedPlanets(cdata);\n                this._planets1 = this.getPlanets(pdata);\n                this._ascendant = pdata.ascendant;\n                this._houses = pdata.houses;\n                break;\n            case ChartType.CombinedTransits:\n                pdata = this.calculateCombinedPlanets(cdata);\n                this._planets1 = this.getPlanets(pdata);\n                this._planets2 = this.getPlanets(cdata[2]);\n                this._ascendant = pdata.ascendant;\n                this._houses = pdata.houses;\n                break;\n            default:\n                this._planets1 = this.getPlanets(cdata[0]);\n                if (cdata[1]) {\n                    this._planets2 = this.getPlanets(cdata[1]);\n                }\n                this._ascendant = cdata[0].ascendant;\n                this._houses = cdata[0].houses;\n                break;\n        }\n        this.calculateAspects();\n    }\n\n    /**\n     * Extracts planet data from ChartData and creates Planet objects for each one\n     * @param  {ChartData}     cdata JSON data returned from morphemeris REST API\n     * @return {Array<Planet>}       An array of Planet objects\n     */\n    getPlanets(cdata: ChartData): Array<Planet> {\n        let planets: Array<Planet> = [];\n        for (let p in cdata.planets) {\n            let pd = cdata.planets[p];\n            planets.push(new Planet(pd.name, pd.lon, pd.lat, pd.spd));\n        }\n        return planets;\n    }\n\n    /**\n     * Calculates the aspects between planets in the chart\n     */\n    calculateAspects(): void {\n        this._aspects = [];\n        if (!this._planets2) {\n            // calculate aspects within the _planets1 array\n            for (let i in this._planets1) {\n                for (let j in this._planets1) {\n                    if (i !== j && j > i) {\n                        try {\n                            this._aspects.push(new Aspect(this._planets1[i], this._planets1[j]));\n                        } catch (err) {}\n                    }\n                }\n            }\n        }\n        else {\n            // calculate aspects between the _planets1 and _planets2 arrays\n            for (let i in this._planets1) {\n                for (let j in this._planets2) {\n                    try {\n                        this._aspects.push(new Aspect(this._planets1[i], this._planets2[j]));\n                    } catch (err) {}\n                }\n            }\n        }\n    }\n\n    /**\n     * Calculates longitudes for a combined chart\n     * @param {ChartData} p1 Planet data from person one\n     * @param {ChartData} p2 Planet data from person two\n     */\n    calculateCombinedPlanets(cdata: ChartDataArray): ChartData {\n        let cd: ChartData = {\"planets\":{\"sun\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"moon\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"mercury\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"venus\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"mars\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"jupiter\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"saturn\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"uranus\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"neptune\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"pluto\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"north node\":{\"name\":\"north node\",\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"south node\":{\"name\":\"south node\",\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"chiron\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"pholus\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"ceres\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"pallas\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"juno\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"vesta\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"cupido\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"chariklo\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"chaos\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"eris\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null},\"nessus\":{\"name\":null,\"lon\":null,\"lat\":null,\"spd\":null,\"r\":null}},\"houses\":[null,null,null,null,null,null,null,null,null,null,null,null], \"ascendant\": null, \"mc\": null};\n        for (let p in cdata[0].planets) {\n            cd.planets[p].name = p;\n            cd.planets[p].lon = this.getLonMidpoint(cdata[0].planets[p].lon, cdata[1].planets[p].lon);\n            cd.planets[p].lat = (cdata[0].planets[p].lat + cdata[1].planets[p].lat) / 2;\n            cd.planets[p].spd = (cdata[0].planets[p].spd + cdata[1].planets[p].spd) / 2;\n        }\n        for (let h in cdata[0].houses) {\n            cd.houses[h] = this.getLonMidpoint(cdata[0].houses[h], cdata[1].houses[h]);\n        }\n        cd.ascendant = this.getLonMidpoint(cdata[0].ascendant, cdata[1].ascendant);\n        cd.mc = this.getLonMidpoint(cdata[0].mc, cdata[1].mc);\n        return cd;\n    }\n\n    /**\n     * Finds the midpoint between two planets on the \"short\" side\n     * @param  {number} l1 Longitude of planet one\n     * @param  {number} l2 Longitude of planet two\n     * @return {number}    Longitude of the midpoint\n     */\n    getLonMidpoint(l1: number, l2: number): number {\n        let mp: number, high: number, low: number;\n\n        // if they are exactly the same, return either one\n        if (l1 === l2) {\n            return l1;\n        }\n\n        // figure out which has a higher/lower longitude\n        high = l1 > l2 ? l1 : l2;\n        low  = l1 < l2 ? l1 : l2;\n\n        if (high - low <= 180) {\n            mp = (high + low) / 2;\n        }\n        else {\n            mp = ((((low + 360) - high) / 2) + high) % 360;\n        }\n\n        return mp;\n    }\n\n    /**\n     * Refresh or set the transits to a new time\n     * @param {string} date (Optional) Target datetime for transits in ISO 8601 format; defaults to now()\n     */\n    async refreshTransits(date: string = null) {\n        if (ChartType.Synastry === this.type) {\n            throw new Error(\"You cannot refresh transits on a synastry chart\");\n        }\n        if (null === date) {\n            date = new Date().toISOString();\n        }\n        let cdata = await ChartFactory.getChartData(date, this.p1.location);\n        this._planets2 = this.getPlanets(cdata);\n        this.calculateAspects();\n    }\n\n    get houses():  Array<number> { return this._houses;  }\n    get aspects(): Array<Aspect> { return this._aspects; }\n    get ascendant(): number { return this._ascendant; }\n    get innerPlanets(): Array<Planet> { return this._planets2 ? this._planets1 : []; }\n    get outerPlanets(): Array<Planet> { return this._planets2 ? this._planets2 : this._planets1; }\n\n}\n\n/**\n * Usage: let chart: Chart = ChartFactory.create(\"my cart\", person);\n */\nexport class ChartFactory {\n\n    static async create(name: string, p1: Person | Event, p2: Person | Event = null, type: ChartType = ChartType.Basic) {\n        // make sure a name was passed in\n        if (null === name || \"undefined\" === typeof name || 0 === name.length) {\n            throw Error(\"Chart must have a name (ChartFactory)\");\n        }\n        // check for undefined people\n        if (null === p1 || typeof p1 === \"undefined\") {\n            throw Error(\"Person or Event cannot be null or undefined (ChartFactory)\");\n        }\n        switch (type) {\n            case ChartType.Synastry:\n            case ChartType.Combined:\n            case ChartType.CombinedTransits:\n            case ChartType.Davison:\n                if (null === p2) {\n                    throw Error(\"2nd Person or Event cannot be null for this chart type (ChartFactory)\");\n                }\n        }\n\n        let cdata: Array<ChartData> = [], date: string, p: Point;\n        switch (type) {\n            case ChartType.Transits:\n                cdata = await Promise.all([\n                    ChartFactory.getChartData(p1.date, p1.location),\n                    ChartFactory.getChartData(new Date().toISOString(), p1.location)\n                ]);\n                return new Chart(name, p1, cdata, null, type);\n            case ChartType.Synastry:\n            case ChartType.Combined:\n                cdata = await Promise.all([\n                    ChartFactory.getChartData(p1.date, p1.location),\n                    ChartFactory.getChartData(p2.date, p2.location)\n                ]);\n                return new Chart(name, p1, cdata, null, type);\n            case ChartType.CombinedTransits:\n                cdata = await Promise.all([\n                    ChartFactory.getChartData(p1.date, p1.location),\n                    ChartFactory.getChartData(p2.date, p2.location),\n                    ChartFactory.getChartData(new Date().toISOString(), p1.location)\n                ]);\n                return new Chart(name, p1, cdata, null, type);\n            case ChartType.Davison:\n                date = ChartFactory.getDatetimeMidpoint(p1.date, p2.date);\n                p = ChartFactory.getGeoMidpoint(p1.location, p2.location);\n                cdata.push(await ChartFactory.getChartData(date, p));\n                return new Chart(name, p1, cdata);\n            case ChartType.DavisonTransits:\n                date = ChartFactory.getDatetimeMidpoint(p1.date, p2.date);\n                p = ChartFactory.getGeoMidpoint(p1.location, p2.location);\n                cdata = await Promise.all([\n                    ChartFactory.getChartData(date, p),\n                    ChartFactory.getChartData(new Date().toISOString(), p)\n                ]);\n                return new Chart(name, p1, cdata, null, type);\n            default:\n                cdata.push(await ChartFactory.getChartData(p1.date, p1.location));\n                return new Chart(name, p1, cdata);\n        }\n    }\n\n    /**\n     * Calculates the lat/lon of the geographic midpoint between two lat/lon pairs\n     * @param  {Point} p1 Latitude/longitude of first location\n     * @param  {Point} p2 Latitude/longitude of second location\n     * @return {Point} The latitude/longitude of the geographic midpoint\n     */\n    static getGeoMidpoint(p1: Point, p2: Point): Point {\n        let lat1 = ChartFactory.toRadians( p1.lat ),\n            lng1 = ChartFactory.toRadians( p1.lng ),\n            lat2 = ChartFactory.toRadians( p2.lat ),\n            lng2 = ChartFactory.toRadians( p2.lng ),\n            bx   = Math.cos( lat2 ) * Math.cos( lng2 - lng1 ),\n            by   = Math.cos( lat2 ) * Math.sin( lng2 - lng1 ),\n            lng3 = lng1 + Math.atan2( by, Math.cos( lat1 ) + bx ),\n            lat3 = Math.atan2( Math.sin( lat1 ) + Math.sin( lat2 ),\n                   Math.sqrt( Math.pow( Math.cos( lat1 ) + bx, 2 ) + Math.pow( by, 2 ) ) );\n\n        return {\n            lat: ChartFactory.toDegrees( lat3 ),\n            lng: ChartFactory.toDegrees( lng3 )\n        };\n    }\n\n    /**\n     * Finds the exact midpoint between two dates\n     * @param  {string} date1 The first date\n     * @param  {string} date2 The second date\n     * @return {string}       The midpoint date as an ISO 8601 string\n     */\n    static getDatetimeMidpoint(date1: string, date2: string): string {\n        let d1 = new Date(date1).getTime(),\n            d2 = new Date(date2).getTime(),\n            ts: number;\n\n        // if two dates are the same, midpoint is just that date\n        if (d1 === d2) {\n            return date1;\n        }\n\n        ts = d1 < d2 ? d1 + ((d2 - d1) / 2) : d2 + ((d1 - d2) / 2);\n        return new Date(ts).toISOString();\n    }\n\n    /**\n     * Gets chart data from the online ephemeris\n     * @param {string} date A UTC datetime string in ISO 8601 format\n     * @param {Point}  p    An object with numeric lat and lng properties\n     * @return {Promise<ChartData>}  A JSON object with the data needed to implement a chart\n     */\n    static async getChartData(date: string, p: Point): Promise<ChartData> {\n        return await rp({\n            uri: \"http://www.morphemeris.com/ephemeris.php\",\n            qs: {\n                date: date,\n                lat: p.lat,\n                lon: p.lng\n            },\n            json: true\n        }).then((cdata: ChartData) => cdata);\n    }\n\n    /**\n     * Converts decimal degrees to radians\n     * @param  {number} degrees Decimal representation of degrees to be converted\n     * @return {number}         Returns radians\n     */\n    static toRadians = (degrees: number) => degrees * Math.PI / 180;\n\n    /**\n     * Converts radians to decimal degrees\n     * @param  {number} radians Radians to be converted\n     * @return {number}         Returns decimal degrees\n     */\n    static toDegrees = (radians: number) => radians * 180 / Math.PI;\n}\n"],"sourceRoot":"/source/"}